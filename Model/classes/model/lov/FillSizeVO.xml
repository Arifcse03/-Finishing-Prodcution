<?xml version="1.0" encoding="windows-1252" ?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">
<!---->
<ViewObject
  xmlns="http://xmlns.oracle.com/bc4j"
  Name="FillSizeVO"
  Version="11.1.1.62.29"
  InheritPersonalization="true"
  BindingStyle="OracleName"
  CustomQuery="true"
  PageIterMode="Full"
  UseGlueCode="false">
  <DesignTime>
    <Attr Name="_isExpertMode" Value="true"/>
  </DesignTime>
  <Properties>
    <SchemaBasedProperties>
      <LABEL
        ResId="model.lov.FillSizeVO_LABEL"/>
    </SchemaBasedProperties>
  </Properties>
  <Variable
    Name="P_LINE_ID"
    Kind="viewcriteria"
    Type="java.lang.String">
    <Properties>
      <SchemaBasedProperties>
        <DISPLAYHINT
          Value="Hide"/>
      </SchemaBasedProperties>
    </Properties>
  </Variable>
  <Variable
    Name="p_Org_Id"
    Kind="where"
    Type="java.lang.String">
    <Properties>
      <SchemaBasedProperties>
        <DISPLAYHINT
          Value="Hide"/>
      </SchemaBasedProperties>
    </Properties>
    <TransientExpression><![CDATA[adf.context.sessionScope.orgId]]></TransientExpression>
  </Variable>
  <SQLQuery>
    <![CDATA[SELECT STYLE_name,
 OC_NO,
 MAIN_Q.LINE_NO,
 (TOTAL_QTY) TOTAL_QTY,
 INSEAM_SIZE_CONCAT,
 INSEAM,
 sum(SIZE_QTY) SIZE_QTY,
 NVL(Main_q.TOTAL_DAY_PRODUCTION,0) PREV_PROD_QTY,
 NVL(Main_q.TOTAL_DAY_REJECTION,0) DAY_REJ_PRE_QTY,
 (TOTAL_QTY) - (NVL(Main_q.TOTAL_DAY_PRODUCTION,0) - NVL(Main_q.TOTAL_DAY_REJECTION,0)) WIP_QTY,
 SEASON,
 Color
FROM 
( 
SELECT 
 MMC.LINE_NO,
 OOLA.USER_ITEM_DESCRIPTION ,
 MMC.STYLE_Name ,
 MMC.BUYER_ID,
 MMC.SEASON,
 OOHA.CUST_PO_NUMBER || '/' || OOLA.LINE_NUMBER OC_NO,
 MMCD.QUANTITY TOTAL_QTY,
 (SELECT MMRSV.SIZE1 
 FROM MNJ_MFG_RATIO_SIZE_V MMRSV 
 WHERE SIZE_D.INSEAM_SIZE_CONCAT = MMRSV.SIZE_INSEAM
 AND ROWNUM = 1 
 ) INSEAM_SIZE_CONCAT,
 (SELECT MMRSV.INSEAM 
 FROM MNJ_MFG_RATIO_SIZE_V MMRSV 
 WHERE SIZE_D.INSEAM_SIZE_CONCAT = MMRSV.SIZE_INSEAM
 AND ROWNUM = 1 
 ) INSEAM,
 ROUND(SIZE_D.SIZE_QTY) SIZE_QTY,
 OOHA.CUST_PO_NUMBER, 
 OOHA.HEADER_ID,
 OOHA.ORG_ID,
 mmcl.attribute3 Color,
 
 (SELECT SUM(NVL(DDD.DAY_PROD, 0)) 
 FROM MNJ_MFG_FINISH_PROD_L LL, MNJ_MFG_FINISH_PROD_D DDD
 WHERE DDD.LINE_ID = LL.LINE_ID
 and LL.SALE_ORDER_ID = OOHA.HEADER_ID
 AND LL.LINE_NO = MMC.LINE_NO
 and LL.STN_NO = OOHA.CUST_PO_NUMBER || '/' || OOLA.LINE_NUMBER
 and DDD.SIZE_INSEAM = (SELECT MMRSV.INSEAM 
 FROM MNJ_MFG_RATIO_SIZE_V MMRSV 
 WHERE SIZE_D.INSEAM_SIZE_CONCAT= MMRSV.SIZE_INSEAM
 AND ROWNUM = 1) 
 and DDD.SIZE_VALUE = (SELECT MMRSV.SIZE1 
 FROM MNJ_MFG_RATIO_SIZE_V MMRSV 
 WHERE SIZE_D.INSEAM_SIZE_CONCAT = MMRSV.SIZE_INSEAM
 AND ROWNUM = 1))TOTAL_DAY_PRODUCTION,
 
 (SELECT SUM(NVL(DDD.DAY_REJECTION, 0)) 
 FROM MNJ_MFG_FINISH_PROD_L LL, MNJ_MFG_FINISH_PROD_D DDD
 WHERE DDD.LINE_ID = LL.LINE_ID
 and LL.SALE_ORDER_ID = OOHA.HEADER_ID
 AND LL.LINE_NO = MMC.LINE_NO
 and LL.STN_NO = OOHA.CUST_PO_NUMBER || '/' || OOLA.LINE_NUMBER
 and DDD.SIZE_INSEAM = (SELECT MMRSV.INSEAM 
 FROM MNJ_MFG_RATIO_SIZE_V MMRSV 
 WHERE SIZE_D.INSEAM_SIZE_CONCAT= MMRSV.SIZE_INSEAM
 AND ROWNUM = 1) 
 and DDD.SIZE_VALUE = (SELECT MMRSV.SIZE1 
 FROM MNJ_MFG_RATIO_SIZE_V MMRSV 
 WHERE SIZE_D.INSEAM_SIZE_CONCAT = MMRSV.SIZE_INSEAM
 AND ROWNUM = 1))TOTAL_DAY_REJECTION
 
 
 FROM 
 oe_order_headers_all ooha,
 Oe_Order_Lines_All oola,
 MNJ_MFG_ISSUE_TO_FINISH_H mmc,
 MNJ_MFG_ISSUE_TO_FINISH_L mmcl,
 MNJ_MFG_ISSUE_FIN_INSEAM_SIZE MMCD,
 wip_discrete_jobs_v wdj,
 MNJ_MFG_RATIOPLAN rrp,
 MNJ_MFG_RATIOPLAN_BPOS_ALL he,
 MNJ_MFG_RATIOPLAN_STNS_ALL bb,
 hz_parties hp,
 mtl_system_items_b msib,
 hz_cust_accounts hca,
 MNJ_COLOR_V MCV,
 CUST_MNJ_ONT_SO_OBINSLINE SIZE_D,
 CUST_MNJ_ONT_SO_OBIN_SIZLINE SIZE_L
WHERE 1 = 1
AND HE.SALE_ORDER_ID = OOHA.HEADER_ID
AND RRP.RATIOPLAN_ID = HE.RATIOPLAN_ID
AND HE.SALE_ORDER_ID = OOHA.HEADER_ID
AND HCA.CUST_ACCOUNT_ID = OOHA.SOLD_TO_ORG_ID
AND OOHA.HEADER_ID = OOLA.HEADER_ID
AND MMC.HEADER_ID = MMCL.HEADER_ID
AND MMCL.LINE_ID = MMCD.LINE_ID
AND SIZE_L.SO_OBINSLINE_ID = SIZE_D.SO_OBINSLINE_ID
 AND SIZE_L.SALES_ORDER_ID = OOHA.HEADER_ID
AND HCA.CUST_ACCOUNT_ID = MMC.BUYER_ID
AND OOHA.CUST_PO_NUMBER = (SUBSTR(BB.STN_NO,0,INSTR(BB.STN_NO,'/')-1))
--AND OOHA.CUST_PO_NUMBER || '/' || OOLA.LINE_NUMBER = WDJ.ATTRIBUTE2
--AND OOHA.CUST_PO_NUMBER || '/' || OOLA.LINE_NUMBER = WDJ.ATTRIBUTE2
--AND OOHA.HEADER_ID = WDJ.ATTRIBUTE1
and rrp.style=wdj.attribute6
and rrp.season=wdj.attribute7
and rrp.color=wdj.attribute8
AND WDJ.CLASS_CODE = 'FIN'
AND MSIB.ORGANIZATION_ID = 353
AND MSIB.INVENTORY_ITEM_ID = OOLA.INVENTORY_ITEM_ID
AND HP.PARTY_ID = HCA.PARTY_ID

AND OOHA.CUST_PO_NUMBER || '/' || OOLA.LINE_NUMBER=MMCL.ATTRIBUTE2 -------------ppppppppppppppppppp
 AND MMC.BUYER_ID = OOHA.SOLD_TO_ORG_ID
 
 AND MMC.STYLE_Name = OOHA.SHIPPING_INSTRUCTIONS -------------------ppppppppppppppppppp

 AND MMC.SEASON = OOHA.ATTRIBUTE4
AND rrp.color = mmcl.attribute3 
AND MCV.FLEX_VALUE = MSIB.SEGMENT4

and mmcd.ATTRIBUTE1 = (SELECT MMRSV.INSEAM 
 FROM MNJ_MFG_RATIO_SIZE_V MMRSV 
 WHERE SIZE_D.INSEAM_SIZE_CONCAT = MMRSV.SIZE_INSEAM
 AND ROWNUM = 1 
 ) 
 
 and mmcd.SIZE_INSEAM = (SELECT MMRSV.SIZE1 
 FROM MNJ_MFG_RATIO_SIZE_V MMRSV 
 WHERE SIZE_D.INSEAM_SIZE_CONCAT = MMRSV.SIZE_INSEAM
 AND ROWNUM = 1 
 ) 

AND (SELECT DISTINCT mmoda.final_mfg_org_id
 FROM mnj_mfg_osp_dep_assign mmoda,
 mnj_mfg_osp_stn_line mmosl
 WHERE mmoda.stn_line_id = mmosl.stn_line_id
 AND MMOSL.STN = OOHA.CUST_PO_NUMBER || '/' || OOLA.LINE_NUMBER
 AND MMODA.FINAL_DEPARTMENT = 'Finishing') =:p_Org_Id

) MAIN_Q 

WHERE 1=1
and MAIN_Q.TOTAL_QTY <> 0

GROUP BY 
 MAIN_Q.LINE_NO,
 USER_ITEM_DESCRIPTION ,
 STYLE_name,
 OC_NO,
 TOTAL_QTY,
 INSEAM_SIZE_CONCAT,
 INSEAM,
 NVL(Main_q. TOTAL_DAY_PRODUCTION,0),
 NVL(Main_q.TOTAL_DAY_REJECTION,0),
 BUYER_ID,
 SEASON,
 Color]]>
  </SQLQuery>
  <ViewAttribute
    Name="StyleName"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="500"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="STYLE_NAME"
    Expression="STYLE_NAME"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="500"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="OcNo"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="40"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="OC_NO"
    Expression="OC_NO"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="40"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="LineNo"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="250"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="LINE_NO"
    Expression="LINE_NO"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="250"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="TotalQty"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="TOTAL_QTY"
    Expression="TOTAL_QTY"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="InseamSizeConcat"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="100"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="INSEAM_SIZE_CONCAT"
    Expression="INSEAM_SIZE_CONCAT"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="100"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="Inseam"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="5"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="INSEAM"
    Expression="INSEAM"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="5"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="SizeQty"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="SIZE_QTY"
    Expression="SIZE_QTY"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="PrevProdQty"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="PREV_PROD_QTY"
    Expression="PREV_PROD_QTY"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="DayRejPreQty"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="DAY_REJ_PRE_QTY"
    Expression="DAY_REJ_PRE_QTY"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="WipQty"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="WIP_QTY"
    SQLType="NUMERIC"
    Expression="WIP_QTY">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="Season"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="500"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="SEASON"
    Expression="SEASON"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="500"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="Color"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="250"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="COLOR"
    Expression="COLOR"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="250"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="PrevRejQty"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="PREV_REJ_QTY"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="BelQty"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="BEL_QTY"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="DayRejTotal"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="DAY_REJ_TOTAL"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="HeaderId"
    IsUpdateable="false"
    IsPersistent="false"
    IsNotNull="true"
    PrecisionRule="true"
    Precision="15"
    Scale="0"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="HEADER_ID"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="16"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="ObRef"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="40"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="OB_REF"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="40"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="DayProd"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="500"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="DAY_PROD"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="500"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="DayRejection"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Precision="500"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="DAY_REJECTION"
    SQLType="VARCHAR">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="500"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="TotalInput"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="oracle.jbo.domain.Number"
    ColumnType="NUMBER"
    AliasName="TOTAL_INPUT"
    SQLType="NUMERIC">
    <DesignTime>
      <Attr Name="_DisplaySize" Value="39"/>
    </DesignTime>
  </ViewAttribute>
  <ViewAttribute
    Name="SFlag"
    IsSelected="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR"/>
  <ResourceBundle>
    <PropertiesBundle
      PropertiesFile="model.ModelBundle"/>
  </ResourceBundle>
</ViewObject>
